<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Closing Whisper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{ --bg-dark:#05060a; --bg-mid:#071025; --aurora1:rgba(120,255,170,0.18); --aurora2:rgba(60,240,200,0.12); --aurora3:rgba(100,200,250,0.08); }
    html,body{height:100%;margin:0;font-family: 'Cursive', serif;background: linear-gradient(180deg, var(--bg-mid) 10%, var(--bg-dark) 100%);color:#fff;overflow:hidden;display:flex;align-items:center;justify-content:center}

    /* full-screen layers */
    .layer{position:fixed;inset:0;pointer-events:none}

    /* Aurora canvas sits behind everything */
    #auroraCanvas{z-index:0}

    /* star field above aurora */
    .stars{z-index:1}
    .star{position:absolute;background:#fff;border-radius:50%;opacity:.9;transform:translate3d(0,0,0);box-shadow:0 0 6px rgba(255,255,255,0.85)}

    /* moon */
    .moon{position:fixed;right:8%;top:10%;width:120px;height:120px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #fff 0%, #f6f8ff 18%, #cdd7ff 50%, transparent 60%);box-shadow:0 0 40px rgba(255,255,255,0.04), inset -14px -10px 18px rgba(0,0,0,0.12);z-index:4;filter:drop-shadow(0 8px 30px rgba(0,0,0,0.4))}
    .moon::after{content:'';position:absolute;left:20%;top:55%;width:40%;height:28%;background:rgba(0,0,0,0.06);border-radius:40%;transform:rotate(-25deg)}

    /* whisper text - centered and animated */
    .whisper{position:relative;z-index:6;max-width:820px;margin:0;text-align:center;padding:2rem;font-size:clamp(1.2rem,3vw,2.25rem);line-height:1.45;color:#e9f9ff;text-shadow:0 8px 26px rgba(0,0,0,0.6);transform:translateZ(0);animation:float 8s ease-in-out infinite, glow 6s ease-in-out infinite alternate}

    /* color-shift overlay to give an aurora hue change across the whole page */
    .colorShift{position:fixed;inset:0;z-index:2;pointer-events:none;mix-blend-mode:screen;opacity:0.08;background:linear-gradient(120deg, rgba(120,255,170,0.25), rgba(100,200,250,0.20), rgba(80,180,200,0.15));filter:blur(40px);animation:hueRotate 24s linear infinite}

    /* falling star styling uses canvas drawing */

    /* small helper for subtle gradient overlay */
    .overlay-gradient{position:fixed;inset:0;z-index:5;pointer-events:none;background:linear-gradient(180deg,rgba(0,0,0,0.0) 10%, rgba(0,0,0,0.35) 90%)}

    /* twinkle animation with random durations applied via JS */
    @keyframes twinkle{0%{opacity:0.15}50%{opacity:1}100%{opacity:0.15}}

    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-12px)}100%{transform:translateY(0)}}

    @keyframes glow{0%{text-shadow:0 6px 18px rgba(0,0,0,0.6), 0 0 10px rgba(120,255,170,0.06)}50%{text-shadow:0 18px 46px rgba(0,0,0,0.6), 0 0 46px rgba(120,255,170,0.12)}100%{text-shadow:0 6px 18px rgba(0,0,0,0.6), 0 0 10px rgba(100,200,250,0.05)}}

    @keyframes hueRotate{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}

    /* responsive adjustments */
    @media (max-width:520px){ .moon{width:80px;height:80px;right:6%;top:6%} .whisper{padding-top:28vh;font-size:1.1rem} }
  </style>
</head>
<body>
  <!-- Background music -->
  <audio id="bg-music" autoplay loop>
    <source src="music/romantic5.mp3" type="audio/mpeg">
    Your browser does not support audio.
  </audio>

  <!-- Aurora and falling-stars use canvas for smooth animation -->
  <canvas id="auroraCanvas" class="layer" width="1600" height="900" aria-hidden="true"></canvas>

  <!-- star DOM layer (for many small twinkling stars) -->
  <div class="stars layer" id="starField" aria-hidden="true"></div>

  <!-- subtle color-shift overlay to animate hues across the page -->
  <div class="colorShift layer" id="colorShift" aria-hidden="true"></div>

  <div class="overlay-gradient"></div>

  <div class="moon" aria-hidden="true"></div>

  <main class="whisper">
    I love you like the night loves its stars,<br>
    without needing to own their light.<br>
    Under the vast and quiet sky, <br> where constellations bloom in silence,<br>
    my heart and soul whispers your name to the moon.
  </main>

  <script>
  // Utility
  const rand = (a,b)=> Math.random()*(b-a)+a;

  // --- Star Field (DOM-based small stars for cheap twinkle) ---
  (function createStars(){
    const starField = document.getElementById('starField');
    const count = Math.max(80, Math.floor((innerWidth*innerHeight)/8000));
    for(let i=0;i<count;i++){
      const s = document.createElement('div');
      const size = Math.random()*2.8 + 0.4;
      s.className = 'star';
      s.style.width = `${size}px`;
      s.style.height = `${size}px`;
      s.style.left = `${Math.random()*100}%`;
      s.style.top = `${Math.random()*100}%`;
      const delay = rand(0,8);
      const dur = rand(2.4,6.2);
      s.style.animation = `twinkle ${dur}s ease-in-out ${delay}s infinite`;
      s.style.opacity = rand(0.2,0.95);
      // subtle color tint for variety
      const tint = Math.random();
      if(tint>0.96) s.style.background = 'rgba(255,235,200,0.95)';
      else if(tint<0.05) s.style.background = 'rgba(200,230,255,0.95)';
      starField.appendChild(s);
    }
  })();

  // --- Canvas Aurora + Falling Stars ---
  (function auroraAndMeteors(){
    const canvas = document.getElementById('auroraCanvas');
    const ctx = canvas.getContext('2d');
    let DPR = Math.max(1, window.devicePixelRatio || 1);
    function resize(){
      DPR = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(window.innerWidth * DPR);
      canvas.height = Math.floor(window.innerHeight * DPR);
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      ctx.setTransform(DPR,0,0,DPR,0,0);
    }
    window.addEventListener('resize', resize, {passive:true});
    resize();

    // Aurora layers
    const auroraLayers = [];
    for(let i=0;i<3;i++){
      auroraLayers.push({offset:rand(0,360), speed:rand(0.0006,0.002), amplitude:rand(40,160), hue:rand(120,180), alpha:rand(0.06,0.16)});
    }

    // Meteors (falling stars)
    const meteors = [];
    function spawnMeteor(){
      if(meteors.length>10 && Math.random()<0.6) return;
      const length = rand(80,220);
      const speed = rand(900,2200); // px/sec
      const angle = rand(20,50) * Math.PI/180;
      const startX = rand(-0.2*innerWidth, innerWidth*1.1);
      const startY = rand(-0.1*innerHeight, innerHeight*0.3);
      meteors.push({x:startX, y:startY, len:length, speed:speed, angle:angle, life:0, ttl:rand(0.6,1.6)});
    }

    let last = performance.now();
    function render(now){
      const dt = (now - last)/1000; last = now;
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // soft vignette and subtle noise
      ctx.save();
      ctx.globalCompositeOperation = 'screen';

      // draw aurora layers
      auroraLayers.forEach((L, idx)=>{
        L.offset += L.speed * dt * 360;
        const g = ctx.createLinearGradient(0, canvas.height*0.2, 0, canvas.height);
        const hue = L.hue;
        g.addColorStop(0, `hsla(${hue},90%,70%,${L.alpha})`);
        g.addColorStop(0.4, `hsla(${hue+30},85%,60%,${L.alpha*0.8})`);
        g.addColorStop(1, `hsla(${hue+60},80%,50%,0)`);

        ctx.fillStyle = g;
        ctx.beginPath();
        const width = innerWidth;
        const height = innerHeight;
        const baseY = height*0.28 + idx*30;
        ctx.moveTo(0, height);
        // create wavy path
        const steps = 6 + idx*2;
        for(let i=0;i<=steps;i++){
          const t = i/steps;
          const x = t * width;
          const sway = Math.sin((t*12 + L.offset*0.02)) * (L.amplitude*(0.6 + 0.6*Math.sin(L.offset*0.01)));
          const y = baseY + sway * (1 - Math.pow((t-0.5)*2,2));
          ctx.lineTo(x, y);
        }
        ctx.lineTo(width, height);
        ctx.closePath();
        // glow
        ctx.shadowBlur = 40 + idx*20;
        ctx.shadowColor = `hsla(${hue+20},90%,60%,${L.alpha*1.2})`;
        ctx.fill();
        ctx.shadowBlur = 0;
      });

      ctx.restore();

      // spawn meteors occasionally
      if(Math.random() < 0.018) spawnMeteor();

      // update and draw meteors
      for(let i = meteors.length-1; i>=0; i--){
        const m = meteors[i];
        m.life += dt;
        const vx = Math.cos(m.angle) * m.speed * dt;
        const vy = Math.sin(m.angle) * m.speed * dt;
        m.x += vx; m.y += vy;
        const progress = m.life / m.ttl;
        const alpha = Math.max(0, 1 - progress);

        // trail line
        ctx.beginPath();
        const tx = m.x - Math.cos(m.angle)*m.len;
        const ty = m.y - Math.sin(m.angle)*m.len;
        const grad = ctx.createLinearGradient(tx, ty, m.x, m.y);
        grad.addColorStop(0, `rgba(255,255,255,${0.0})`);
        grad.addColorStop(0.6, `rgba(255,240,220,${alpha*0.45})`);
        grad.addColorStop(1, `rgba(255,255,255,${alpha})`);
        ctx.strokeStyle = grad;
        ctx.lineWidth = 2.2;
        ctx.lineCap = 'round';
        ctx.beginPath();
        ctx.moveTo(tx, ty);
        ctx.lineTo(m.x, m.y);
        ctx.stroke();

        // head glow
        ctx.beginPath();
        ctx.fillStyle = `rgba(255,255,255,${alpha})`;
        ctx.arc(m.x, m.y, 2.6 + 3*alpha, 0, Math.PI*2);
        ctx.fill();

        if(m.life > m.ttl) meteors.splice(i,1);
      }

      requestAnimationFrame(render);
    }
    requestAnimationFrame(render);
  })();

  // Try to play audio on user interaction if autoplay blocked
  document.addEventListener('click', ()=>{
    const a = document.getElementById('bg-music');
    if(a) a.play().catch(()=>{});
  }, {once:true});
  </script>
  <!-- Page transition snippet -->
  <style>
    body.page-transition{opacity:0;transform:translateY(6px);transition:opacity .5s ease, transform .5s ease}
    body.page-ready{opacity:1;transform:none}
    body.page-going{opacity:0;transform:translateY(-6px)}
  </style>
  <script>
    (function(){
      const body=document.body; body.classList.add('page-transition');
      window.addEventListener('DOMContentLoaded',()=>{body.classList.add('page-ready'); body.classList.remove('page-transition')});
      document.addEventListener('click', e=>{const a=e.target.closest('a[href]'); if(!a) return; const href=a.getAttribute('href'); if(href.startsWith('#')||href.startsWith('mailto:')||href.startsWith('javascript:')) return; e.preventDefault(); body.classList.add('page-going'); setTimeout(()=>location.href=href,450);});
      window.navigateTo=function(url){ body.classList.add('page-going'); setTimeout(()=>location.href=url,450); };
    })();
  </script>
</body>
</html>